<ui-plugin>

    <div style="width:100%;padding:20px">
        
        <ui-component name="tablegrid" path="?.tables" config="count:4" style="border:1px solid #EBECF2">

            <script type="text/html">
                <div class="exec" data-exec="?/view">

                    <div style="padding:20px 0;text-align:center; background-color: lightgray;" class="b">
                        <div>{{ value.title }}</div>
                    </div>
                    
                    <ui-component name="listbox" path="?.selected" config="required:true;datasource:?.products;"></ui-component>
 
                </div>
            </script>

        </ui-component>
    </div>
    <script>


    </script>

</ui-plugin>

<script>
    PLUGIN(function (exports) {

        exports.reload = function () {

            SET('?.selected', 4);
            SET('?.products',
                [
                    {
                        id: '1',
                        name: 'test',
                    },
                    {
                        id: '2',
                        name: 'test',
                    },
                    {
                        id: '3',
                        name: 'test',
                    },
                    {
                        id: '4',
                        name: 'test',
                    },
                ]
            );


            SET('?.tables',
                [
                    { 
                        title: 'Total.js',
                    }, 
                    { 
                        title: 'SuperAdmin',
                    }, 
                    { 
                        title: 'Code Editor',
                    }, 
                    { 
                        title: 'jComponent',
                    }
                ]
            );


            exports.ajax('GET /api/tables/ @showloading', 'tables @hideloading');          // data will end up in PLUGINS.tables
        };

        exports.view = function () {
            // alert('todo');
        };    

        exports.create = function () {
        };

    });

</script>